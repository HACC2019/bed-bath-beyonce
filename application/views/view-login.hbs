<div id="signup">
<h1>Register</h1>
<a href="#" id="yesaccount">Already have an account?</a>
<form class="signup" action="/login/signup" method="post">
    <p>First Name: <input type="text" name="fname"></p>
    <p>Last Name: <input type="text" name="lname"></p>
    <p>Email: <input type="text" name="email"></p>
    <p>Password: <input type="password" name="password"></p>
    <p>Confirm Password: <input type="password" name="confirmpassword"></p>
    <p>School: <input type="text" name="school"></p>
    <p>Organization: <input type="text" name="organization"></p>
    <input type="submit" value="Register!">
</form>
</div>

<div id="signin">
<h1>Login</h1>
<a href="#" id="noaccount">Don't have an account?</a>
<form class="signin" action="/login/signin" method="post">
    <p>Email: <input type="text" name="email"></p>
    <p>Password: <input type="password" name="password"></p>
    <input type="submit" value="Login!">
</form>
</div>

<script>
    $(function(){

        var state = {{{state}}};
        if(state == 'signin'){
            $('#signup').hide();
        }
        if(state == 'signup'){
            $('#signin').hide();
        }

        $('#noaccount').click(function(){
            $('#signup').show(500);
            $('#signin').hide();
        });

        $('#yesaccount').click(function(){
            $('#signin').show(500);
            $('#signup').hide();
        });

        //Handles signin validation retreived from server 
        var signin_errors = {{{signin_errors}}};
        var signin_data = {{{signin_data}}};

        if(signin_errors != null){
            signin_errors.forEach(function(signin_error){
                $(`form.signin [name = ${signin_error.param}]`)
				.css({
					'border': '2px solid red'
				})
				.after(`${signin_error.msg}<br>`)
            });
            signin_data.forEach(function(data){
                $(`form.signin [name = ${data.name}]`)
                .val(data.value);
			});
        }

        //Handles signup data retreived from server
        var signup_errors = {{{signup_errors}}};
        var signup_data = {{{signup_data}}};

        if(signup_errors != null){
            signup_errors.forEach(function(signup_error){
                $(`form.signup [name = ${signup_error.param}]`)
				.css({
					'border': '2px solid red'
				})
				.after(`${signup_error.msg}<br>`)
            });
            signup_data.forEach(function(data){
                $(`form.signup [name = ${data.name}]`)
                .val(data.value);
			});
        } 
    });
</script>
